
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The eos module &#8212; pyRT_DISORT  documentation</title>
    
  <link href="../../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/plot_directive.css" />
    
  <link rel="preload" as="script" href="../../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="The rayleigh module" href="rayleigh.html" />
    <link rel="prev" title="The observation module" href="observation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../../../index.html">
<p class="title">pyRT_DISORT</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../about-this-project/about-pyRT_DISORT.html">
  About pyRT_DISORT
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../about-this-project/about-DISORT.html">
  About DISORT
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../about-this-project/release-notes.html">
  Release notes
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../../tutorials.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../api-reference.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../for-contributors/contributions.html">
  Contributions
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/kconnour/pyRT_DISORT" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p class="caption" role="heading">
 <span class="caption-text">
  Retrievals from scratch
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../spacecraft_retrieval.html">
   Spacecraft Retrieval
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="observation.html">
     The observation module
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     The eos module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="rayleigh.html">
     The rayleigh module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="aerosol.html">
     The aerosol module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="atmosphere.html">
     The atmosphere module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="controller.html">
     The controller module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="radiation.html">
     The radiation module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="output.html">
     The output module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="surface.html">
     The surface module
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="running_the_model.html">
     Running the model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="retrieval.html">
     Retrieval
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hydrostatic">
   Hydrostatic
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="the-eos-module">
<h1>The eos module<a class="headerlink" href="#the-eos-module" title="Permalink to this headline">¶</a></h1>
<p>Let’s now turn our attention to creating the atmospheric model. This will be a
multi-step process that will span several modules, but we can start by just
defining the boundaries we’d like to use in the model, along with equation of
state variables.</p>
<div class="section" id="hydrostatic">
<h2>Hydrostatic<a class="headerlink" href="#hydrostatic" title="Permalink to this headline">¶</a></h2>
<p>Suppose we have a temperature and pressure profile and the altitude where those
quantities are defined for out pixel. If we think the atmosphere is in hydrostatic
equilibrium, we can use <code class="xref py py-class docutils literal notranslate"><span class="pre">Hydrostatic</span></code> to compute the number
density, column density, and scale height—just about all the equation of
state quantities we’d care about when doing a retrieval.</p>
<p>Let’s start by making some profiles and defining some properties of the
atmosphere.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">altitude_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
<span class="n">pressure_profile</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">altitude_grid</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">temperature_profile</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">51</span><span class="p">)</span>
<span class="n">mass</span> <span class="o">=</span> <span class="mf">7.3</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**-</span><span class="mi">26</span>
<span class="n">gravity</span> <span class="o">=</span> <span class="mf">3.7</span>
</pre></div>
</div>
<p>Here, we have great resolution of our profiles (2 km) but that doesn’t mean
we necessarily want to run a retrieval with 50 layers in it. Let’s specify
an altitude grid that defines the boundaries we actually want to use in the
retrieval.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">z_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>To keep with DISORT’s convention that altitudes start from the top of the
atmosphere, the altitude and altitude grid must be <em>decreasing</em>.</p>
</div>
<p>We can now add these to <code class="docutils literal notranslate"><span class="pre">Hydrostatic</span></code>. It will start by linearly
interpolating the input temperature and pressure onto the desired grid. Then,
it will compute number density and scale height at the new boundaries, and the
column density within the new boundaries. As before, we can access these arrays
via the class properties.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyRT_DISORT.eos</span> <span class="kn">import</span> <span class="n">Hydrostatic</span>

<span class="n">hydro</span> <span class="o">=</span> <span class="n">Hydrostatic</span><span class="p">(</span><span class="n">altitude_grid</span><span class="p">,</span> <span class="n">pressure_profile</span><span class="p">,</span> <span class="n">temperature_profile</span><span class="p">,</span>
                    <span class="n">z_grid</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">gravity</span><span class="p">)</span>

<span class="n">altitude</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">altitude</span>
<span class="n">pressure</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">pressure</span>
<span class="n">TEMPER</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">temperature</span>
<span class="n">number_density</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">number_density</span>
<span class="n">column_density</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">column_density</span>
<span class="n">n_layers</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">n_layers</span>
<span class="n">H_LYR</span> <span class="o">=</span> <span class="n">hydro</span><span class="o">.</span><span class="n">scale_height</span>
</pre></div>
</div>
<p>Most of these properties aren’t required by DISORT (<code class="docutils literal notranslate"><span class="pre">TEMPER</span></code> and
<code class="docutils literal notranslate"><span class="pre">H_LYR</span></code> are required under certain conditions) but several of
these variables will be needed in a few steps. Regardless, you may find a
number of these “unnecessary” variables to be handy when playing with your
retrievals.</p>
<p>As you’d expect, the equation of state variables have the same shape as
<code class="docutils literal notranslate"><span class="pre">z_grid</span></code>. The one exception is <code class="docutils literal notranslate"><span class="pre">column_density</span></code> which is one
element shorter than the rest since it’s only defined within each of the
<em>layers</em>. With that, we have our boundaries all good to go.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’re lucky enough to already have the values for all of these
quantities (like from a GCM) you can skip making this object and directly
input these values later on.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="observation.html" title="previous page">The observation module</a>
    <a class='right-next' id="next-link" href="rayleigh.html" title="next page">The rayleigh module</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, kconnour.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.1.1.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>